<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>WilliamBot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#0b0a08">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="WilliamBot">

  <style>
    :root {
      --bg:#0b0a08;
      --panel:#14110d;
      --cream:#f3efe6;
      --ink:#1b1813;
      --muted:#8b8276;
      --border:rgba(243,239,230,.12);
      --accent:#7a1114;
      --radius:18px;
      --font:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial;
    }

    * { box-sizing:border-box; }
    html,body { height:100%; margin:0; }

    body {
      font-family:var(--font);
      background:linear-gradient(180deg,#0b0a08,#12100c);
      color:var(--cream);
    }

    .app {
      height:100%;
      display:grid;
      grid-template-columns:280px 1fr 320px;
      grid-template-rows:auto 1fr auto;
      gap:12px;
      padding:12px;
    }

    header {
      grid-column:1 / -1;
      background:var(--panel);
      border-radius:var(--radius);
      padding:14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      border:1px solid var(--border);
    }

    .brand {
      display:flex;
      align-items:center;
      gap:10px;
    }

    .logo {
      width:36px;
      height:36px;
      border-radius:12px;
      background:var(--accent);
      display:grid;
      place-items:center;
      font-weight:900;
    }

    aside {
      background:var(--panel);
      border-radius:var(--radius);
      border:1px solid var(--border);
      padding:12px;
      overflow:auto;
    }

    .panelTitle {
      font-size:12px;
      opacity:.7;
      margin-bottom:8px;
    }

    .session {
      padding:10px;
      border-radius:12px;
      background:rgba(255,255,255,.04);
      margin-bottom:8px;
      font-size:13px;
      cursor:pointer;
    }

    main {
      background:linear-gradient(180deg,#f5f1e9,#efe9dd);
      color:var(--ink);
      border-radius:var(--radius);
      display:flex;
      flex-direction:column;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.08);
    }

    .feed {
      flex:1;
      padding:16px;
      overflow:auto;
    }

    .msg {
      max-width:75%;
      margin-bottom:14px;
      padding:12px 14px;
      border-radius:14px;
      font-size:14.5px;
      line-height:1.45;
    }

    .msg.bot {
      background:white;
      border:1px solid rgba(0,0,0,.08);
    }

    .msg.you {
      background:rgba(122,17,20,.08);
      border-left:4px solid var(--accent);
      margin-left:auto;
    }

    .meta {
      font-size:11px;
      opacity:.6;
      margin-top:4px;
    }

    .composer {
      display:flex;
      gap:10px;
      padding:12px;
      border-top:1px solid rgba(0,0,0,.08);
      background:rgba(255,255,255,.6);
    }

    textarea {
      flex:1;
      resize:none;
      border-radius:14px;
      border:1px solid rgba(0,0,0,.12);
      padding:12px;
      font-size:14px;
      font-family:inherit;
    }

    button {
      border-radius:14px;
      padding:12px 16px;
      font-weight:700;
      background:var(--accent);
      color:white;
      border:none;
    }

    .context {
      font-size:13px;
      line-height:1.4;
    }

    .contextBlock {
      background:rgba(255,255,255,.04);
      border-radius:12px;
      padding:10px;
      margin-bottom:10px;
    }

    @media (max-width:1100px) {
      .app { grid-template-columns:260px 1fr; }
      .contextPanel { display:none; }
    }

    @media (max-width:760px) {
      .app { grid-template-columns:1fr; }
      aside { display:none; }
    }
  </style>
</head>

<body>
  <div class="app">
    <header>
      <div class="brand">
        <div class="logo">W</div>
        <strong>WilliamBot</strong>
      </div>
      <div style="font-size:12px;opacity:.7">
        UI-only • Local backend later
      </div>
    </header>

    <aside>
      <div class="panelTitle">Sessions</div>
      <div class="session">Pricing & Margins</div>
      <div class="session">Formulation</div>
      <div class="session">Amazon Ops</div>
    </aside>

    <main>
      <div class="feed" id="feed">
        <div class="msg bot">
          UI is live.<br><br>
          This is your personal AI workspace.<br>
          Backend will connect via Tailscale when your PC arrives.
          <div class="meta">Confidence: Medium</div>
        </div>
      </div>

      <div class="composer">
        <textarea id="input" placeholder="Ask, calculate, simulate…"></textarea>
        <button id="send">Send</button>
      </div>
    </main>

    <aside class="contextPanel">
      <div class="panelTitle">Context</div>
      <div class="context">
        <div class="contextBlock">
          <strong>Working assumptions</strong><br>
          Target margin ≥ 70%<br>
          Channel: Amazon + Shopify
        </div>
        <div class="contextBlock">
          <strong>Ledger</strong><br>
          Last decision: 8oz butter → $66
        </div>
      </div>
    </aside>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const feed = document.getElementById("feed");
      const input = document.getElementById("input");
      const send = document.getElementById("send");

      function addMessage(text, role) {
        const div = document.createElement("div");
        div.className = "msg " + role;
        div.textContent = text;
        feed.appendChild(div);
        feed.scrollTop = feed.scrollHeight;
      }

      send.addEventListener("click", () => {
        const text = input.value.trim();
        if (!text) return;
        input.value = "";
        addMessage(text, "you");
        addMessage("Backend not connected yet. UI-only mode.", "bot");
      });

      input.addEventListener("keydown", e => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          send.click();
        }
      });
    });
  </script>
</body>
</html>